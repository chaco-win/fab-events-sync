services:
  bot-worker:
    build: .
    image: fab-events-discord-bot:latest
    container_name: fab-bot-worker
    env_file:
      - .env
    environment:
      - DB_PATH=/botdata/bot.db
      - DATA_JSON_PATH=/app/data
      - SCHEDULE_CRON=${SCHEDULE_CRON:-0 9 * * 3}
      - TZ=${TZ:-America/Chicago}
    volumes:
      - bot_data:/botdata
      - ../data:/app/data:ro
    command: ["node", "dist/worker.js"]
    restart: unless-stopped

volumes:
  bot_data:
